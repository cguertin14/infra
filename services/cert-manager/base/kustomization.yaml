apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: cert-manager

patchesStrategicMerge:
- patches/cainjector_namespace.yml
# - patches/certmanager_namespace.yml

helmCharts:
- name: cert-manager
  includeCRDs: true
  releaseName: cert-manager
  version: v1.13.3
  repo: https://charts.jetstack.io
  namespace: cert-manager
  valuesInline:
    installCRDs: true
    leaderElection:
      namespace: 'cert-manager'
    extraArgs:
    - --v=2
    - --controllers=*
    - --cluster-resource-namespace=$(POD_NAMESPACE)